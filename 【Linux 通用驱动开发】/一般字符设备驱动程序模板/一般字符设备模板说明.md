## 一般模板！

驱动程序的一般建立过程描述：

1. 模块被加载的时候（被 insmod 的时候，执行通过 module_init() 注册的函数），基本的，进行 获取外设资源，注册设备、创建设备类、创建设备。
2. 被 open 时候，进行 设备初始化操作。
3. read() / write() / ioctl() 等等。
4. 被 close 时候，进行 设备反初始化操作，外设恢复到 初始化以前 或 默认的状态。
5. 模块被卸载的时候（被 rmmod的时候，执行通过 module_exit() 注册的函数），基本的，进行 释放外设资源、删除设备、删除设备类、卸载设备注册。即 与模块加载的时候的过程相反，创建了什么就卸载掉什么，并且顺序相反。模块状态回归到模块加载以前的状态，资源尽量都释放掉。

一般模板，这里都是字符型设备，包括中断、信号在内，用不到的部分可以注释掉。



